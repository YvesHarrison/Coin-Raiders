<!doctype html>
<meta charset="utf-8">

<head>
 
  <!--Kevin Custom CSS-->
  <link rel="stylesheet" href="styles/index.css">
   <!--Kevin Google Material-->
  <link rel="stylesheet" href="https://code.getmdl.io/1.2.1/material.indigo-pink.min.css">
</head>


<title>Game states</title>

<body>
  <script src="pixi.js"></script>
  <script src="./google-blockly-82871b3/blockly_compressed.js"></script>
  <script src="./google-blockly-82871b3/blocks_compressed.js"></script>
  <script src="./google-blockly-82871b3/javascript_compressed.js"></script>
  <script src="./google-blockly-82871b3/msg/js/en.js"></script>
  <script src="scripts/customblocks.js"></script>
  <script src="scripts/execute.js"></script>


  <button type="button" class="btnRun" onclick="runCode()">Run Code</button>
  <br/>
  <br/>
  <div id="blocklyDiv" style="height: 500px; width: 600px;"></div>

  <xml id="toolbox" style="display: none">
     
    <block type="custom_repeat">
        <value name="TIMES">
            <shadow type="math_number">
              <field name="NUM">3</field>
            </shadow>
        </value>
    </block>
    

    <!--Kevin Custom Blocks-->
    <block type="move_left"></block>
    <block type="move_right"></block>
    <block type="move_up"></block>
    <block type="move_down"></block>
    
    
    <!--
      Kevin - Unneeded Blocks
  
       <block type="controls_repeat_ext">
          <value name="TIMES">
              <shadow type="math_number">
                <field name="NUM">3</field>
              </shadow>
          </value>
      </block>


       <block type="controls_repeat_ext">
        <value name="TIMES">
            <shadow type="math_number">
              <field name="NUM">3</field>
            </shadow>
        </value>
    </block>
      <block type="logic_compare"></block>
      <block type="math_number"></block>
      <block type="math_arithmetic"></block>
      <block type="controls_if"></block>
      <block type="text"></block>
      <block type="text_print"></block>
  
  
    -->
    
    
  </xml>
  
    <script>
      var workspace = Blockly.inject('blocklyDiv',
        { toolbox: document.getElementById('toolbox') });
    </script>

  <script>
    //Aliases
    let Application = PIXI.Application,
      Container = PIXI.Container,
      loader = PIXI.loader,
      resources = PIXI.loader.resources,
      TextureCache = PIXI.utils.TextureCache,
      Sprite = PIXI.Sprite;
    //Create a Pixi Application
    let app = new Application({
      width: 256,
      height: 256,
      antialiasing: true,
      transparent: false,
      resolution: 1
    }
    );
    //Add the canvas that Pixi automatically created for you to the HTML document
    document.body.appendChild(app.view);
    loader
      .add("images/cat.png")
      .load(setup);
    //Define any variables that are used in more than one function
    let cat, state;
    function setup() {
      //Create the `cat` sprite 
      cat = new Sprite(resources["images/cat.png"].texture);
      cat.y = 96;
      cat.vx = 0;
      cat.vy = 0;
      app.stage.addChild(cat);
      //Set the game state
      state = play;

      //Start the game loop 
      app.ticker.add(delta => gameLoop(delta));
    }
    function gameLoop(delta) {
      //Update the current game state:
      state(delta);
    }
    function play(delta) {
      //Move the cat 1 pixel to the right each frame
      cat.vx = 1
      cat.x += cat.vx;
    }
  </script>



</body>